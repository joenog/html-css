<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contas a pagar</title>
    <!-- STYLE -->
    <style>
        * {
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            box-sizing: border-box;
            padding: 0px;
            margin: 0px;
        }

        header {
            text-align: center;
            margin: 40px;
        }

        main {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        form {
            padding: 20px;
            border-radius: 20px;
            box-shadow: 2px 2px 5px rgba(65, 31, 255, 0.100),
            -2px -2px 5px rgba(0, 0, 0, 0.100);
        }

        input {
            font-size: 1.1em;
            margin: 8px;
            padding: 5px;
            border-radius: 20px;
            border: 1px solid rgba(128, 128, 128, 0.164);
            min-width: 300px;
        } input[type=submit] {
            margin-left: 8%;
        }

         #res, #total {
            min-width: 300px;
            padding: 15px;
            margin: 8px;
            border-radius: 20px;
            box-shadow: 2px 2px 5px rgba(65, 31, 255, 0.100),
            -2px -2px 5px rgba(0, 0, 0, 0.100);
        }
        
        #alerta {
            min-width: 300px;
            padding: 15px;
            margin: 8px;
            border-radius: 20px;
            color: white;
            font-weight: bold;
        }

    </style>

</head>
<body>
    <header>
        <h1>Contas a pagar</h1>
    </header>

    <main>
        <form action="">
            <div>
                <label for="inNome">Nome:</label>
                <input type="text" id="inNome" required autofocus placeholder="Energia, Telefone ...">
            </div>
            <div>
                <label for="inValor">Valor:</label>
                <input type="number" id="inValor" required step="0.01">
            </div>
            <input type="submit" value="Somar">
        </form>

        <div id="total"> Total:  </div>
        <div id="res"> Contas adicionadas:  </div> 
        <div id="alerta">  </div>

    </main>

    <script>
        const frm = document.querySelector('form');
        const res = document.querySelector('#res');
        const alerta = document.querySelector('#alerta');
        const total = document.querySelector('#total');
        const contas = []; // INICIO ARRAY VAZIA PARA ARMAZENAR VALROES

        frm.addEventListener('submit', (e) => {
            e.preventDefault();
            // PEGO NOME E VALOR INSERIODS NO FORMULARIO
            const nome = frm.inNome.value;
            const valor = Number(frm.inValor.value);
            // OBJETO LITERAL - PARA CONTA
            const conta = {
                nome: nome,
                valor: valor
            };
            //CONTA EXISTENTE
            const contaAdicionada = contas.find(c => c.nome === conta.nome);
            //MENSAGEM DE CONTA ADICIONADA
            if (contaAdicionada) {
                alerta.innerText = `Conta jÃ¡ adicionada...`
                alerta.style.background = '#e2511891'
                setTimeout(() => {
                    alerta.innerText = '';
                    alerta.style.background = 'white'
                }, 4000);
            } else {
                contas.push(conta); // CASO N ESTEJA O ARRAY CONTA PUXA A NOVA ACONTA ADICIONADA
                res.innerText = ''; // O OUTPUT RES EH LIMPADO 
                //ITERAR SOBRE AS CONTAS PARA IMPRIMIR
                contas.forEach((item, index) => {  //Isso inicia um loop que percorre cada elemento no array
                res.innerText += `Conta: (${index + 1}) ${item.nome} - ${item.valor} \n`
                });
            }
            //ACUMULADOR VAlORES DAS CONTAS
            let totalContas = contas.reduce((acumulador, conta) => {return acumulador + conta.valor}, 0);
            total.innerText = `Total: ${totalContas.toFixed(2)}`;
        });
    </script>
</body>
</html>